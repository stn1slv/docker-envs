version: '3.5'

services:
    tripbooking:
        image: stn1slv/trip-booking-demo-app
        container_name: trip-booking-app
        ports:
            - 8080:8080
    carbooking:
        image: stn1slv/car-booking-demo-app
        container_name: car-booking-app
        ports:
            - 8081:8080
    flightbooking:
        image: stn1slv/flight-booking-demo-app
        container_name: flight-booking-app
        ports:
            - 8082:8080
    hotelbooking:
        image: stn1slv/hotel-booking-demo-app
        container_name: hotel-booking-app
        ports:
            - 8083:8080
    filebeat:
        image: docker.elastic.co/beats/filebeat-oss:7.10.2
        container_name: filebeat
        user: root
        volumes: 
            - /var/lib/docker:/var/lib/docker:ro
            - /var/run/docker.sock:/var/run/docker.sock
            - ./demo-apps/filebeat.yml:/usr/share/filebeat/filebeat.yml
        command: filebeat -e -strict.perms=false